<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Conflicts Data Editor</title>

    <!-- Base CSS -->
    <link rel="stylesheet" href="css/style.css" />
    <!-- Editor CSS -->
    <link rel="stylesheet" href="css/editor.css" />
</head>
<body>
    <div class="editor-container">
        <!-- Header -->
        <header class="header">
            <h1>Conflicts Data Editor</h1>
            <p class="subtitle">Add, edit, and manage conflict records</p>
        </header>

        <!-- Toolbar -->
        <div class="toolbar">
            <div class="toolbar-left">
                <button id="btn-add" class="btn btn-primary">+ Add New Conflict</button>
                <button id="btn-ai" class="btn btn-secondary" title="AI features coming soon" disabled>
                    <span class="ai-icon">&#9733;</span> AI Generate
                </button>
            </div>
            <div class="toolbar-center">
                <input type="text" id="search-input" class="search-input" placeholder="Search conflicts...">
                <select id="filter-country" class="filter-select">
                    <option value="">All Countries</option>
                </select>
                <select id="filter-type" class="filter-select">
                    <option value="">All Types</option>
                </select>
            </div>
            <div class="toolbar-right">
                <button id="btn-import" class="btn btn-outline">Import</button>
                <button id="btn-export" class="btn btn-outline">Export</button>
                <button id="btn-reset" class="btn btn-danger-outline">Reset</button>
            </div>
        </div>

        <!-- Status Bar -->
        <div class="status-bar">
            <span id="status-count">Loading...</span>
            <span id="status-modified" class="status-modified hidden">Modified (unsaved changes)</span>
        </div>

        <!-- Conflicts Table -->
        <div class="table-container">
            <table class="conflicts-table">
                <thead>
                    <tr>
                        <th class="sortable" data-sort="name">Name</th>
                        <th class="sortable" data-sort="type">Type</th>
                        <th>Countries</th>
                        <th class="sortable" data-sort="startDate">Start Date</th>
                        <th class="sortable" data-sort="endDate">End Date</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody id="conflicts-tbody">
                    <!-- Rows inserted by JS -->
                </tbody>
            </table>
        </div>

        <!-- Hidden file input for import -->
        <input type="file" id="import-file" accept=".json" style="display: none;">
    </div>

    <!-- Add/Edit Modal -->
    <div id="edit-modal" class="modal hidden">
        <div class="modal-content modal-large">
            <button class="modal-close" id="modal-close">&times;</button>
            <div class="modal-body">
                <h2 id="modal-title">Add New Conflict</h2>
                <form id="conflict-form">
                    <div class="form-row">
                        <div class="form-group flex-2">
                            <label for="input-name">Name *</label>
                            <input type="text" id="input-name" required placeholder="e.g., War in Afghanistan">
                        </div>
                        <div class="form-group flex-1">
                            <label for="input-id">ID (auto-generated)</label>
                            <input type="text" id="input-id" placeholder="auto-generated">
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group flex-1">
                            <label for="input-type">Type *</label>
                            <select id="input-type" required>
                                <option value="">Select type...</option>
                            </select>
                        </div>
                        <div class="form-group flex-1">
                            <label for="input-start">Start Date *</label>
                            <input type="date" id="input-start" required>
                        </div>
                        <div class="form-group flex-1">
                            <label for="input-end">End Date *</label>
                            <input type="date" id="input-end" required>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="input-countries">Countries * (hold Ctrl/Cmd to select multiple)</label>
                        <select id="input-countries" multiple required size="6">
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="input-description">Description *</label>
                        <textarea id="input-description" rows="4" required placeholder="Describe the conflict..."></textarea>
                    </div>

                    <div class="form-row">
                        <div class="form-group flex-1">
                            <label for="input-casualties-us">U.S. Casualties</label>
                            <input type="number" id="input-casualties-us" min="0" value="0">
                        </div>
                        <div class="form-group flex-1">
                            <label for="input-casualties-total">Total Casualties</label>
                            <input type="number" id="input-casualties-total" min="0" value="0">
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="input-outcome">Outcome</label>
                        <input type="text" id="input-outcome" placeholder="e.g., U.S. withdrawal; Taliban victory">
                    </div>

                    <div class="form-group">
                        <label for="input-wikilink">Wikipedia Link</label>
                        <input type="url" id="input-wikilink" placeholder="https://en.wikipedia.org/wiki/...">
                    </div>

                    <div class="form-actions">
                        <button type="button" id="btn-cancel" class="btn btn-outline">Cancel</button>
                        <button type="submit" class="btn btn-primary">Save Conflict</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Delete Confirmation Modal -->
    <div id="delete-modal" class="modal hidden">
        <div class="modal-content modal-small">
            <div class="modal-body">
                <h2>Delete Conflict?</h2>
                <p id="delete-message">Are you sure you want to delete this conflict?</p>
                <div class="form-actions">
                    <button type="button" id="btn-delete-cancel" class="btn btn-outline">Cancel</button>
                    <button type="button" id="btn-delete-confirm" class="btn btn-danger">Delete</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Reset Confirmation Modal -->
    <div id="reset-modal" class="modal hidden">
        <div class="modal-content modal-small">
            <div class="modal-body">
                <h2>Reset Data?</h2>
                <p>This will discard all changes and reload the original data from conflicts.json.</p>
                <div class="form-actions">
                    <button type="button" id="btn-reset-cancel" class="btn btn-outline">Cancel</button>
                    <button type="button" id="btn-reset-confirm" class="btn btn-danger">Reset</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="js/data_aux.js"></script>
    <script src="js/editor.js"></script>
</body>
</html>
